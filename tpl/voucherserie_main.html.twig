{% include "headitem.html.twig" with {title: "GENERAL_ADMIN_TITLE"|translate} %}

{% if readonly %}
    {% set readonly = "readonly disabled" %}
{% else %}
    {% set readonly = "" %}
{% endif %}

<script type="text/javascript">
<!--
function changeFnc( fncName )
{
    var langvar = document.myedit.elements['fnc'];
    if (langvar != null )
        langvar.value = fncName;
}
//-->
</script>

<form name="transfer" id="transfer" action="{{ oViewConf.getSelfLink()|raw }}" method="post">
    {{ oViewConf.getHiddenSid()|raw }}
    <input type="hidden" name="oxid" value="{{ oxid }}">
    <input type="hidden" name="cl" value="voucherserie_main">
</form>



<table cellspacing="0" cellpadding="0" border="0" width="98%">
<tr>
    <td valign="top" class="edittext" width="355">

<form name="myedit" id="myedit" action="{{ oViewConf.getSelfLink()|raw }}" method="post">
{{ oViewConf.getHiddenSid()|raw }}
<input type="hidden" name="cl" value="voucherserie_main">
<input type="hidden" name="fnc" value="save">
<input type="hidden" name="oxid" value="{{ oxid }}">
<input type="hidden" name="editval[oxvoucherseries__oxid]" value="{{ oxid }}">
<input type="hidden" name="randomNr" value="true">

        <table cellspacing="2" cellpadding="0" border="0">
        {% block admin_voucherserie_main_form %}
            <tr>
                <td class="edittext" width="160">
                {{ translate({ ident: "GENERAL_NAME" }) }}
                </td>
                <td class="edittext" width="195">
                <input class="editinput" type="text" size="36" name="editval[oxvoucherseries__oxserienr]" value="{{ edit.oxvoucherseries__oxserienr.value }}" onClick="this.select()" {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_GENERAL_NAME"), 'sHelpText': help_text("HELP_GENERAL_NAME")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext" width="90">
                {{ translate({ ident: "GENERAL_DESCRIPTION" }) }}
                </td>
                <td class="edittext">
                <input class="editinput" type="text" size="36" name="editval[oxvoucherseries__oxseriedescription]" value="{{ edit.oxvoucherseries__oxseriedescription.value }}" onClick="this.select()" {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_GENERAL_DESCRIPTION"), 'sHelpText': help_text("HELP_GENERAL_DESCRIPTION")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext">
                {{ translate({ ident: "GENERAL_BEGINDATE" }) }}
                </td>
                <td class="edittext">
                <input type="text" class="editinput" size="27" name="editval[oxvoucherseries__oxbegindate]" value="{{ edit.oxvoucherseries__oxbegindate|format_date }}" {% include "help.html.twig" with {helpid: "article_vonbis"} %} onClick="this.select()" {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_GENERAL_BEGINDATE"), 'sHelpText': help_text("HELP_GENERAL_BEGINDATE")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext">
                {{ translate({ ident: "GENERAL_ENDDATE" }) }}
                </td>
                <td class="edittext">
                <input type="text" class="editinput" size="27" name="editval[oxvoucherseries__oxenddate]" value="{{ edit.oxvoucherseries__oxenddate|format_date }}" {% include "help.html.twig" with {helpid: "article_vonbis"} %} onClick="this.select()" {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_GENERAL_ENDDATE"), 'sHelpText': help_text("HELP_GENERAL_ENDDATE")} %}
                </td>
            </tr>
            {% block admin_voucherserie_main_form_discount_type %}
                <tr>
                    <td class="edittext">
                    {{ translate({ ident: "VOUCHERSERIE_MAIN_DISCOUNT" }) }}
                    </td>
                    <td class="edittext">
                    <input class="editinput" type="text" size="15" name="editval[oxvoucherseries__oxdiscount]" value="{{ edit.oxvoucherseries__oxdiscount.value }}" onClick="this.select()" {{ readonly }}>
                    <select class="editinput" name="editval[oxvoucherseries__oxdiscounttype]" {{ readonly }}>
                        <option value="absolute" {% if edit.oxvoucherseries__oxdiscounttype.value == "absolute" %}selected{% endif %}>abs</option>
                        <option value="percent" {% if edit.oxvoucherseries__oxdiscounttype.value == "percent" %}selected{% endif %}>%</option>
                    </select>
                    {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_DISCOUNT"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_DISCOUNT")} %}
                    </td>
                </tr>
            {% endblock %}
            <tr>
                <td class="edittext">
                {{ translate({ ident: "VOUCHERSERIE_MAIN_MINORDERPRICE" }) }}
                </td>
                <td class="edittext">
                <input type="text" class="editinput" size="15" name="editval[oxvoucherseries__oxminimumvalue]" value="{{ edit.oxvoucherseries__oxminimumvalue.value }}" onClick="this.select()" {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_MINORDERPRICE"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_MINORDERPRICE")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext">
                {{ translate({ ident: "VOUCHERSERIE_MAIN_ALLOWSAMESERIES" }) }}
                </td>
                <td class="edittext">
                {{ translate({ ident: "GENERAL_YES" }) }}&nbsp;<input type="radio" name="editval[oxvoucherseries__oxallowsameseries]" value="1" {% if edit.oxvoucherseries__oxallowsameseries.value %}checked{% endif %} {{ readonly }}>&nbsp;&nbsp;
                {{ translate({ ident: "GENERAL_NO" }) }}&nbsp;<input type="radio" name="editval[oxvoucherseries__oxallowsameseries]" value="0" {% if not edit.oxvoucherseries__oxallowsameseries.value %}checked{% endif %} {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_ALLOWSAMESERIES"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_ALLOWSAMESERIES")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext">
                {{ translate({ ident: "VOUCHERSERIE_MAIN_ALLOWOTHERSERIES" }) }}
                </td>
                <td class="edittext">
                {{ translate({ ident: "GENERAL_YES" }) }}&nbsp;<input type="radio" name="editval[oxvoucherseries__oxallowotherseries]" value="1" {% if edit.oxvoucherseries__oxallowotherseries.value %}checked{% endif %} {{ readonly }}>&nbsp;&nbsp;
                {{ translate({ ident: "GENERAL_NO" }) }}&nbsp;<input type="radio" name="editval[oxvoucherseries__oxallowotherseries]" value="0" {% if not edit.oxvoucherseries__oxallowotherseries.value %}checked{% endif %} {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_ALLOWOTHERSERIES"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_ALLOWOTHERSERIES")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext">
                {{ translate({ ident: "VOUCHERSERIE_MAIN_SAMESEROTHERORDER" }) }}
                </td>
                <td class="edittext">
                {{ translate({ ident: "GENERAL_YES" }) }}&nbsp;<input type="radio" name="editval[oxvoucherseries__oxallowuseanother]" value="1" {% if edit.oxvoucherseries__oxallowuseanother.value %}checked{% endif %} {{ readonly }}>&nbsp;&nbsp;
                {{ translate({ ident: "GENERAL_NO" }) }}&nbsp;<input type="radio" name="editval[oxvoucherseries__oxallowuseanother]" value="0" {% if not edit.oxvoucherseries__oxallowuseanother.value %}checked{% endif %} {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_SAMESEROTHERORDER"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_SAMESEROTHERORDER")} %}
                </td>
            </tr>
            <tr>
                <td class="edittext">
                {{ translate({ ident: "VOUCHERSERIE_MAIN_CALCULATEONCE" }) }}
                </td>
                <td class="edittext">
                <input type="hidden" name="editval[oxvoucherseries__oxcalculateonce]" value="0" {{ readonly }}>
                <input type="checkbox" name="editval[oxvoucherseries__oxcalculateonce]" value="1" {% if edit.oxvoucherseries__oxcalculateonce.value %}checked{% endif %} {{ readonly }}>
                {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_CALCULATEONCE"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_CALCULATEONCE")} %}
                </td>
            </tr>
        {% endblock %}
        <tr>
            <td class="edittext">
            </td>
            <td class="edittext"><br>
            <input type="submit" class="edittext" name="save" value="{{ translate({ ident: "GENERAL_SAVE" }) }}" {{ readonly }} onClick="Javascript:changeFnc('save');">
            </td>
        </tr>
        </table>

</form>

    </td>
    <td width="355" valign="top">

        {% if oxid != oViewConf.getAjaxLink()|raw %}

        <form name="myexport" id="myexport" action="{{ oViewConf.getSelfLink()|raw }}" target="dynexport_do" method="post">
        {{ oViewConf.getHiddenSid()|raw }}
        <input type="hidden" name="cl" value="">
        <input type="hidden" name="fnc" value="start">
        <input type="hidden" name="voucherid" value="{{ oxid }}">

        <fieldset title="{{ translate({ ident: "VOUCHERSERIE_MAIN_VOUCHERSTATISTICS" }) }}" style="padding-left: 5px; padding-right: 5px;">
            <legend>{{ translate({ ident: "VOUCHERSERIE_MAIN_VOUCHERSTATISTICS" }) }}</legend>
            <iframe src="{{ oViewConf.getSelfLink()|raw }}&cl={{ sClassDo }}&voucherid={{ oxid }}" width="100%" height="80" frameborder="0" name="dynexport_do" align="left"></iframe>
        </fieldset>
        <br>

        <table cellspacing="2" cellpadding="0" width="">
            {% block admin_voucherserie_main_genvoucher %}
                <tr>
                    <td class="edittext" colspan="2">
                        <b>{{ translate({ ident: "VOUCHERSERIE_MAIN_NEWVOUCHER" }) }}</b> (optional)<br><br>
                    </td>
                </tr>
                <tr>
                    <td class="edittext">
                        {{ translate({ ident: "VOUCHERSERIE_MAIN_RANDOMNUM" }) }}
                    </td>
                    <td>
                        <input type="radio" name="randomVoucherNr" value="1" checked {{ readonly }} onclick="document.getElementById('voucherNr').required = false;">
                        {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_RANDOMNUM"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_RANDOMNUM")} %}
                    </td>
                </tr>
                <tr>
                    <td class="edittext">
                        {{ translate({ ident: "VOUCHERSERIE_MAIN_VOUCHERNUM" }) }}
                    </td>
                    <td>
                        <input type="radio" name="randomVoucherNr" id="randomVoucherNr" value="0" {{ readonly }} onclick="document.getElementById('voucherNr').required = true;">
                        <input class="editinput" size="29" type="text" name="voucherNr" id="voucherNr" {{ readonly }} onfocus="document.getElementById('randomVoucherNr').checked='true'; document.getElementById('voucherNr').required = true;">
                        {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_VOUCHERSERIE_MAIN_VOUCHERNUM"), 'sHelpText': help_text("HELP_VOUCHERSERIE_MAIN_VOUCHERNUM")} %}
                    </td>
                </tr>
                <tr>
                    <td class="edittext">
                        {{ translate({ ident: "GENERAL_SUM" }) }}
                    </td>
                    <td>
                        <input type="text" size="29" class="editinput" name="voucherAmount" value="0" {{ readonly }}>
                        {% include "inputhelp.html.twig" with {'sHelpId': help_id("HELP_GENERAL_SUM"), 'sHelpText': help_text("HELP_GENERAL_SUM")} %}
                    </td>
                </tr>
            {% endblock %}
            <tr>
                <td></td>
                <td><br>
                    <input type="submit" class="edittext" name="save" value="{{ translate({ ident: "VOUCHERSERIE_MAIN_GENERATE" }) }}" {{ readonly }} onClick="Javascript:document.myexport.cl.value='voucherserie_generate';">
                    <input type="submit" class="edittext" name="save" value="{{ translate({ ident: "VOUCHERSERIE_MAIN_EXPORT" }) }}" {{ readonly }} onClick="Javascript:document.myexport.cl.value='voucherserie_export';">
                </td>
            </tr>
        </table>

        </form>
        {% endif %}

    </td>
    </tr>
</table>
{% include "bottomnaviitem.html.twig" %}
{% include "bottomitem.html.twig" %}
